{"ast":null,"code":"var _jsxFileName = \"/home/oneclash/Dokumen/codingan/Test/EcoHabit/frontend-react/src/components/dashboard/ActivityList.js\",\n  _s = $RefreshSig$();\n// src/components/dashboard/ActivityList.js\nimport React, { useState } from 'react';\nimport ActivityFilter from './ActivityFilter';\nimport ActivityItem from './ActivityItem';\nimport { authFetch } from '../../services/api';\nimport { useToast } from '../../hooks/useToast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ActivityList({\n  activities,\n  todayProgress = [],\n  onActivityCompleted\n}) {\n  _s();\n  const [currentFilter, setCurrentFilter] = useState('Semua');\n  const {\n    showToast\n  } = useToast();\n  const completedTodayNames = todayProgress.map(a => a.name);\n  const filteredActivities = activities.filter(activity => {\n    if (currentFilter === 'Semua') return true;\n    return activity.category === currentFilter;\n  });\n  const handleCompleteActivity = async activityName => {\n    try {\n      const response = await authFetch('/progress/update', {\n        method: 'POST',\n        body: JSON.stringify({\n          activityName\n        })\n      });\n      showToast(response.message, 'success');\n\n      // Tampilkan notifikasi lencana baru\n      if (response.newBadges && response.newBadges.length > 0) {\n        response.newBadges.forEach((badge, index) => {\n          setTimeout(() => {\n            showToast(`üèÜ Lencana Baru: ${badge.name}!`, 'success');\n          }, (index + 1) * 1000);\n        });\n      }\n\n      // Panggil fungsi refresh data dari parent\n      onActivityCompleted();\n    } catch (error) {\n      console.error('Error completing activity:', error);\n      showToast(error.message || 'Gagal menyimpan aktivitas', 'error');\n      throw error; // Lempar error agar ActivityItem bisa stop loading\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"card-title\",\n      children: \"Aktivitas Hijau Hari Ini\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ActivityFilter, {\n      currentFilter: currentFilter,\n      onFilterChange: setCurrentFilter\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"activitiesList\",\n      children: filteredActivities.map(activity => /*#__PURE__*/_jsxDEV(ActivityItem, {\n        activity: activity,\n        isCompleted: completedTodayNames.includes(activity.name),\n        onComplete: handleCompleteActivity\n      }, activity._id || activity.name, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_s(ActivityList, \"GP+J7eQXgF2WuHctlHrdz1/gXuY=\", false, function () {\n  return [useToast];\n});\n_c = ActivityList;\nexport default ActivityList;\nvar _c;\n$RefreshReg$(_c, \"ActivityList\");","map":{"version":3,"names":["React","useState","ActivityFilter","ActivityItem","authFetch","useToast","jsxDEV","_jsxDEV","ActivityList","activities","todayProgress","onActivityCompleted","_s","currentFilter","setCurrentFilter","showToast","completedTodayNames","map","a","name","filteredActivities","filter","activity","category","handleCompleteActivity","activityName","response","method","body","JSON","stringify","message","newBadges","length","forEach","badge","index","setTimeout","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onFilterChange","id","isCompleted","includes","onComplete","_id","_c","$RefreshReg$"],"sources":["/home/oneclash/Dokumen/codingan/Test/EcoHabit/frontend-react/src/components/dashboard/ActivityList.js"],"sourcesContent":["// src/components/dashboard/ActivityList.js\nimport React, { useState } from 'react';\nimport ActivityFilter from './ActivityFilter';\nimport ActivityItem from './ActivityItem';\nimport { authFetch } from '../../services/api';\nimport { useToast } from '../../hooks/useToast';\n\nfunction ActivityList({ activities, todayProgress = [], onActivityCompleted }) {\n  const [currentFilter, setCurrentFilter] = useState('Semua');\n  const { showToast } = useToast();\n  \n  const completedTodayNames = todayProgress.map(a => a.name);\n\n  const filteredActivities = activities.filter(activity => {\n    if (currentFilter === 'Semua') return true;\n    return activity.category === currentFilter;\n  });\n\n  const handleCompleteActivity = async (activityName) => {\n    try {\n      const response = await authFetch('/progress/update', {\n        method: 'POST',\n        body: JSON.stringify({ activityName })\n      });\n      \n      showToast(response.message, 'success');\n      \n      // Tampilkan notifikasi lencana baru\n      if (response.newBadges && response.newBadges.length > 0) {\n        response.newBadges.forEach((badge, index) => {\n          setTimeout(() => {\n            showToast(`üèÜ Lencana Baru: ${badge.name}!`, 'success');\n          }, (index + 1) * 1000);\n        });\n      }\n      \n      // Panggil fungsi refresh data dari parent\n      onActivityCompleted();\n\n    } catch (error) {\n      console.error('Error completing activity:', error);\n      showToast(error.message || 'Gagal menyimpan aktivitas', 'error');\n      throw error; // Lempar error agar ActivityItem bisa stop loading\n    }\n  };\n\n  return (\n    <div className=\"card\">\n      <h2 className=\"card-title\">Aktivitas Hijau Hari Ini</h2>\n      <ActivityFilter \n        currentFilter={currentFilter} \n        onFilterChange={setCurrentFilter} \n      />\n      <div id=\"activitiesList\">\n        {filteredActivities.map(activity => (\n          <ActivityItem \n            key={activity._id || activity.name}\n            activity={activity}\n            isCompleted={completedTodayNames.includes(activity.name)}\n            onComplete={handleCompleteActivity}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default ActivityList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}