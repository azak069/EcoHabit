{"ast":null,"code":"var _jsxFileName = \"/home/oneclash/Dokumen/codingan/Test/EcoHabit/frontend-react/src/components/dashboard/AiAssistant.js\",\n  _s = $RefreshSig$();\n// src/components/dashboard/AiAssistant.js\nimport React, { useState } from 'react';\nimport { authFetch } from '../../services/api';\n\n// Helper dari dashboard.js\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction formatAIResponse(text) {\n  let html = text.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>').replace(/\\*(.*?)\\*/g, '<em>$1</em>').replace(/^- (.*)$/gm, '<li>$1</li>');\n  if (html.includes('<li>')) {\n    html = '<ul>' + html.replace(/<\\/li>\\s*<li>/g, '</li><li>') + '</ul>';\n  }\n  return html;\n}\nfunction AiAssistant({\n  completedToday = []\n}) {\n  _s();\n  const [question, setQuestion] = useState('');\n  const [response, setResponse] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const handleAsk = async () => {\n    if (!question) return;\n    setIsLoading(true);\n    setResponse('Asisten Eco sedang berpikir...');\n    try {\n      const data = await authFetch('/ai/ask', {\n        method: 'POST',\n        body: JSON.stringify({\n          question\n        })\n      });\n      setResponse(formatAIResponse(data.answer));\n      setQuestion('');\n    } catch (err) {\n      setResponse(`Maaf, terjadi kesalahan: ${err.message}`);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleSuggest = async () => {\n    setIsLoading(true);\n    setResponse('Mencari saran aktivitas...');\n    try {\n      const data = await authFetch('/ai/suggest', {\n        method: 'POST',\n        body: JSON.stringify({\n          completedActivities: completedToday\n        })\n      });\n      setResponse(formatAIResponse(data.suggestion));\n    } catch (err) {\n      setResponse(`Maaf, terjadi kesalahan: ${err.message}`);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"card-title\",\n      children: \"Asisten Eco\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ai-assistant\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: question,\n          onChange: e => setQuestion(e.target.value),\n          className: \"form-input\",\n          rows: \"3\",\n          placeholder: \"Tanya apa saja tentang lingkungan...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ai-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAsk,\n          disabled: isLoading,\n          className: \"btn btn-sm\",\n          children: \"Tanya AI\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSuggest,\n          disabled: isLoading,\n          className: \"btn btn-secondary btn-sm\",\n          children: \"Beri Saran\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ai-response\",\n        dangerouslySetInnerHTML: {\n          __html: response || '...'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n_s(AiAssistant, \"EAhcQnWx3pgZv4nm4OgTCrb7Iwc=\");\n_c = AiAssistant;\nexport default AiAssistant;\nvar _c;\n$RefreshReg$(_c, \"AiAssistant\");","map":{"version":3,"names":["React","useState","authFetch","jsxDEV","_jsxDEV","formatAIResponse","text","html","replace","includes","AiAssistant","completedToday","_s","question","setQuestion","response","setResponse","isLoading","setIsLoading","handleAsk","data","method","body","JSON","stringify","answer","err","message","handleSuggest","completedActivities","suggestion","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","rows","placeholder","onClick","disabled","dangerouslySetInnerHTML","__html","_c","$RefreshReg$"],"sources":["/home/oneclash/Dokumen/codingan/Test/EcoHabit/frontend-react/src/components/dashboard/AiAssistant.js"],"sourcesContent":["// src/components/dashboard/AiAssistant.js\nimport React, { useState } from 'react';\nimport { authFetch } from '../../services/api';\n\n// Helper dari dashboard.js\nfunction formatAIResponse(text) {\n  let html = text\n    .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n    .replace(/\\*(.*?)\\*/g, '<em>$1</em>')\n    .replace(/^- (.*)$/gm, '<li>$1</li>');\n  if (html.includes('<li>')) {\n    html = '<ul>' + html.replace(/<\\/li>\\s*<li>/g, '</li><li>') + '</ul>';\n  }\n  return html;\n}\n\nfunction AiAssistant({ completedToday = [] }) {\n  const [question, setQuestion] = useState('');\n  const [response, setResponse] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleAsk = async () => {\n    if (!question) return;\n    setIsLoading(true);\n    setResponse('Asisten Eco sedang berpikir...');\n    try {\n      const data = await authFetch('/ai/ask', {\n        method: 'POST',\n        body: JSON.stringify({ question })\n      });\n      setResponse(formatAIResponse(data.answer));\n      setQuestion('');\n    } catch (err) {\n      setResponse(`Maaf, terjadi kesalahan: ${err.message}`);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSuggest = async () => {\n    setIsLoading(true);\n    setResponse('Mencari saran aktivitas...');\n    try {\n      const data = await authFetch('/ai/suggest', {\n        method: 'POST',\n        body: JSON.stringify({ completedActivities: completedToday })\n      });\n      setResponse(formatAIResponse(data.suggestion));\n    } catch (err) {\n      setResponse(`Maaf, terjadi kesalahan: ${err.message}`);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"card\">\n      <h2 className=\"card-title\">Asisten Eco</h2>\n      <div className=\"ai-assistant\">\n        <div className=\"form-group\">\n          <textarea \n            value={question}\n            onChange={(e) => setQuestion(e.target.value)}\n            className=\"form-input\" \n            rows=\"3\" \n            placeholder=\"Tanya apa saja tentang lingkungan...\"\n          />\n        </div>\n        <div className=\"ai-buttons\">\n          <button onClick={handleAsk} disabled={isLoading} className=\"btn btn-sm\">Tanya AI</button>\n          <button onClick={handleSuggest} disabled={isLoading} className=\"btn btn-secondary btn-sm\">Beri Saran</button>\n        </div>\n        <div \n          className=\"ai-response\"\n          dangerouslySetInnerHTML={{ __html: response || '...' }}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default AiAssistant;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}